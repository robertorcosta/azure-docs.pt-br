---
title: Guia de referência de regras de avaliação de vulnerabilidade do SQL
description: Lista de títulos e descrições de regras para SQL Server, banco de dados SQL do Azure, SQL Instância Gerenciada do Azure e Azure Synapse Analytics
services: sql-database
ms.service: sql-db-mi
ms.subservice: security
ms.topic: reference
author: davidtrigano
ms.author: datrigan
ms.reviewer: vanto
ms.date: 12/14/2020
ms.openlocfilehash: ba6a3313707ca0124c9880a66376ea7a4d9977c1
ms.sourcegitcommit: 8245325f9170371e08bbc66da7a6c292bbbd94cc
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/07/2021
ms.locfileid: "99806317"
---
# <a name="sql-vulnerability-assessment-rules-reference-guide"></a>Guia de referência de regras de avaliação de vulnerabilidade do SQL
[!INCLUDE[appliesto-sqldb-sqlmi-asa](../includes/appliesto-sqldb-sqlmi-asa.md)]

Este artigo lista o conjunto de regras internas que são usadas para sinalizar vulnerabilidades de segurança e realçar desvios das práticas recomendadas, como configurações incorretas, permissões excessivas e dados confidenciais não protegidos. As regras se baseiam nas práticas recomendadas da Microsoft e se concentram nos problemas de segurança que apresentam os maiores riscos ao seu banco de dados e seus valiosos. Elas abordam problemas no nível do banco de dados, bem como problemas de segurança no nível do servidor, como configurações de firewall do servidor e permissões no nível do servidor. Essas regras também representam muitos dos requisitos de várias agências regulatórias para atender aos seus padrões de conformidade.

As regras mostradas em suas verificações de banco de dados dependem da versão do SQL e da plataforma que foi verificada. 

Para saber mais sobre como implementar a avaliação de vulnerabilidade no Azure, consulte [implementar avaliação de vulnerabilidade](./sql-vulnerability-assessment.md#configure-vulnerability-assessment).

Para obter uma lista das alterações feitas nessas regras, consulte [changelog da avaliação de vulnerabilidade do SQL](sql-database-vulnerability-assessment-rules-changelog.md).

## <a name="rule-categories"></a>Categorias de regras

As regras de avaliação de vulnerabilidade do SQL têm cinco categorias, que estão nas seguintes seções:

- [Autenticação e autorização](#authentication-and-authorization)
- [Auditoria e registro em log](#auditing-and-logging)
- [Proteção de Dados](#data-protection)
- [Patches e atualizações de instalação](#installation-updates-and-patches)
- [Redução da área da superfície](#surface-area-reduction)

<sup>1</sup> **SQL Server 2012 +** refere-se a todas as versões do SQL Server 2012 e posteriores.

<sup>2</sup> **SQL Server 2017 +** refere-se a todas as versões do SQL Server 2017 e posteriores.

<sup>3</sup> **SQL Server 2016 +** refere-se a todas as versões do SQL Server 2016 e posteriores.

## <a name="authentication-and-authorization"></a>Autenticação e autorização

|ID da regra  |Título da regra   |Severidade da regra  |Descrição da Regra  |Plataforma  |
|---------|---------|---------|---------|---------|
| VA1017     |As permissões de execução em xp_cmdshell de todos os usuários (exceto dbo) devem ser revogadas          |Alta         |O procedimento armazenado estendido xp_cmdshell gera um shell de comando do Windows, passando uma cadeia de caracteres para execução. Essa regra verifica se nenhum usuário (diferente de usuários com a permissão CONTROL SERVER, como membros da função de servidor sysadmin) tem permissão para executar o procedimento armazenado estendido xp_cmdshell.         |<nobr>SQL Server 2012 +<sup>1</sup><nobr/>         |
|VA1020     |O convidado do usuário do banco de dados não deve ser um membro de nenhuma função          |Alta         |O usuário convidado permite acesso a um banco de dados para quaisquer logons que não estejam mapeados para um usuário de banco de dados específico. Essa regra verifica se nenhuma função de banco de dados está atribuída ao usuário convidado.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1042     |O encadeamento de Propriedade do banco de dados deve ser desabilitado para todos os bancos de dados, exceto para `master` , `msdb` e `tempdb`          |Alta         |O encadeamento de propriedades entre bancos de dados é uma extensão do encadeamento de propriedade, exceto pelo fato de que ele cruza o limite do banco de dados. Esta regra verifica se essa opção está desabilitada para todos os bancos de dados, exceto para `master` , `msdb` e `tempdb` . Para `master` , `msdb` e, o encadeamento de `tempdb` Propriedade entre bancos de dados é habilitado por padrão.        |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1043     |O convidado principal não deve ter acesso a nenhum banco de dados de usuário          |Médio         |O usuário convidado permite acesso a um banco de dados para quaisquer logons que não estejam mapeados para um usuário de banco de dados específico. Esta regra verifica se o usuário convidado não pode se conectar a nenhum banco de dados.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL        |
|VA1046     |CHECK_POLICY deve ser habilitado para todos os logons do SQL          |Baixo         |CHECK_POLICY opção habilita a verificação de logons do SQL na política de domínio. Essa regra verifica se a opção CHECK_POLICY está habilitada para todos os logons do SQL.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1047     |A verificação de expiração de senha deve ser habilitada para todos os logons do SQL          |Baixo         |As políticas de vencimento da senha são usadas para gerenciar o tempo de vida de uma senha. Quando SQL Server impõe a política de expiração de senha, os usuários são lembrados de alterar senhas antigas e as contas que têm senhas expiradas são desabilitadas. Esta regra verifica se a política de expiração de senha está habilitada para todos os logons do SQL.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1048     |As entidades de banco de dados não devem ser mapeadas para a `sa` conta          |Alta         |Uma entidade de banco de dados que é mapeada para a `sa` conta pode ser explorada por um invasor para elevar permissões para `sysadmin`         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1052     |Remover Builtin\administradores como um logon de servidor          |Baixo         |O grupo Builtin\administradores contém o grupo de administradores locais do Windows. Em versões mais antigas do Microsoft SQL Server esse grupo tem direitos de administrador por padrão. Esta regra verifica se esse grupo foi removido do SQL Server.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1053     |A conta com o nome padrão `sa` deve ser renomeada ou desabilitada          |Baixo         |`sa` é uma conta bem conhecida com a ID de entidade 1. Essa regra verifica se a `sa` conta foi renomeada ou desabilitada.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1054     |Permissões excessivas não devem ser concedidas à função pública em objetos ou colunas          |Baixo         |Cada logon de SQL Server pertence à função de servidor público. Quando uma entidade de segurança de servidor não recebeu ou negou permissões específicas em um objeto protegível, o usuário herda as permissões concedidas ao público nesse objeto. Essa regra exibe uma lista de todos os objetos ou colunas protegíveis que são acessíveis a todos os usuários por meio da função pública.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1058     |`sa` o logon deve ser desabilitado          |Alta         |`sa` é uma conta bem conhecida com a ID de entidade 1. Essa regra verifica se a `sa` conta está desabilitada.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1059     |xp_cmdshell deve ser desabilitado          |Alta         |xp_cmdshell gera um shell de comando do Windows e passa uma cadeia de caracteres para execução. Esta regra verifica se xp_cmdshell está desabilitada.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1067     |Database Mail XPs deve ser desabilitado quando não estiver em uso          |Médio         |Essa regra verifica se o Database Mail está desabilitado quando nenhum perfil do Database Mail é configurado. Database Mail pode ser usado para enviar mensagens de email do Mecanismo de Banco de Dados de SQL Server e está desabilitado por padrão. Se você não estiver usando esse recurso, é recomendável desabilitá-lo para reduzir a área da superfície.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1068     |As permissões do servidor não devem ser concedidas diretamente às entidades          |Baixo         |As permissões no nível do servidor são associadas a um objeto de nível de servidor para regular quais usuários podem obter acesso ao objeto. Essa regra verifica se não há permissões de nível de servidor concedidas diretamente aos logons.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1070     |Os usuários do banco de dados não devem compartilhar o mesmo nome que um logon do servidor          |Baixo         |Os usuários do banco de dados podem compartilhar o mesmo nome que um logon do servidor. Essa regra valida que não há tais usuários.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1072     |O modo de autenticação deve ser autenticação do Windows          |Médio         |Há dois modos de autenticação possíveis: modo de autenticação do Windows e modo misto. O modo misto significa que SQL Server habilita a autenticação do Windows e a autenticação do SQL Server. Essa regra verifica se o modo de autenticação está definido como autenticação do Windows.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1094     |As permissões de banco de dados não devem ser concedidas diretamente às entidades          |Baixo         |As permissões são regras associadas a um objeto protegível para regular quais usuários podem obter acesso ao objeto. Essa regra verifica se não há permissões de banco de dado concedidas diretamente aos usuários.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1095     |Permissões excessivas não devem ser concedidas à função pública          |Médio         |Cada logon de SQL Server pertence à função de servidor público. Quando uma entidade de segurança de servidor não recebeu ou negou permissões específicas em um objeto protegível, o usuário herda as permissões concedidas ao público nesse objeto. Isso exibe uma lista de todas as permissões que são concedidas à função pública.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1096     |O convidado principal não deve receber permissões no banco de dados          |Baixo         |Cada banco de dados inclui um usuário chamado convidado. As permissões concedidas ao convidado são herdadas por usuários que têm acesso ao banco de dados, mas que não têm uma conta de usuário no banco de dados. Essa regra verifica se todas as permissões foram revogadas do usuário convidado.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1097     |O convidado principal não deve receber permissões em objetos ou colunas          |Baixo         |Cada banco de dados inclui um usuário chamado convidado. As permissões concedidas ao convidado são herdadas por usuários que têm acesso ao banco de dados, mas que não têm uma conta de usuário no banco de dados. Essa regra verifica se todas as permissões foram revogadas do usuário convidado.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1099     |O usuário convidado não deve receber permissões em protegíveis de banco de dados          |Baixo         |Cada banco de dados inclui um usuário chamado convidado. As permissões concedidas ao convidado são herdadas por usuários que têm acesso ao banco de dados, mas que não têm uma conta de usuário no banco de dados. Essa regra verifica se todas as permissões foram revogadas do usuário convidado.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1246     |Funções de aplicativo não devem ser usadas          |Baixo         |Uma função de aplicativo é uma entidade de banco de dados que permite que um aplicativo seja executado com suas próprias permissões semelhantes ao usuário. As funções de aplicativo permitem que somente os usuários que se conectam por meio de um aplicativo específico possam acessar dados específicos. As funções de aplicativo são baseadas em senha (que normalmente são codificadas por aplicativos) e não com base na permissão que expõe o banco de dados à representação da função de aplicativo por adivinhação de senha. Esta regra verifica se nenhuma função de aplicativo está definida no banco de dados.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL<br/><br/>Banco de Dados SQL         |
|VA1248     |Funções de banco de dados definidas pelo usuário não devem ser membros de funções fixas          |Médio         |Para gerenciar facilmente as permissões em seus bancos de dados SQL Server fornece várias funções, que são entidades de segurança que agrupam outras entidades. Eles são como grupos no sistema operacional Microsoft Windows. As contas de banco de dados e outras funções de SQL Server podem ser adicionadas às funções de nível de banco de dados. Cada membro de uma função de banco de dados fixa pode adicionar outros usuários a essa mesma função. Essa regra verifica se nenhuma função definida pelo usuário é membro de funções fixas.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL<br/><br/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA1267     |Os usuários contidos devem usar a autenticação do Windows          |Médio         |Os usuários independentes são usuários que existem no banco de dados e não exigem um mapeamento de logon. Esta regra verifica se os usuários contidos usam a autenticação do Windows.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1280     |As permissões do servidor concedidas ao público devem ser minimizadas          |Médio         |Cada logon de SQL Server pertence à função de servidor público. Quando uma entidade de segurança de servidor não recebeu ou negou permissões específicas em um objeto protegível, o usuário herda as permissões concedidas ao público nesse objeto. Essa regra verifica se as permissões de servidor concedidas ao público estão minimizadas.          |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1282     |Funções órfãs devem ser removidas          |Baixo         |As funções órfãs são funções definidas pelo usuário que não têm Membros. Elimine as funções órfãs, pois elas não são necessárias no sistema. Esta regra verifica se há funções órfãs.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL<br/><br/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA2020     |O conjunto mínimo de entidades de segurança deve receber as permissões de escopo de banco de dados ALTER ou ALTER ANY USER          |Alta         |Cada SQL Server protegível tem permissões associadas a ele que podem ser concedidas a entidades de segurança. As permissões podem ser delimitadas no nível do servidor (atribuído a logons e funções de servidor) ou no nível do banco de dados (atribuído a usuários de banco de dados e funções de banco de dados). Essas regras verificam se apenas um conjunto mínimo de entidades recebe permissões de escopo de banco de dados ALTER ou ALTER ANY USER.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL<br/><br/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA2033     |O conjunto mínimo de entidades deve receber a permissão EXECUTE no escopo do banco de dados em objetos ou colunas          |Baixo         |Esta regra verifica quais entidades de segurança recebem permissão EXECUTE em objetos ou colunas para garantir que essa permissão seja concedida a um conjunto mínimo de entidades. Cada SQL Server protegível tem permissões associadas a ele que podem ser concedidas a entidades de segurança. As permissões podem ser delimitadas no nível do servidor (atribuído a logons e funções de servidor) ou no nível de banco de dados (atribuído a usuários de banco de dados, funções de banco de dados ou funções de aplicativo). A permissão EXECUTE se aplica a procedimentos armazenados e funções escalares, que podem ser usados em colunas computadas.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL<br/><br/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA2103     |Permissões de execução desnecessárias em procedimentos armazenados estendidos devem ser revogadas          |Médio         |Os procedimentos armazenados estendidos são DLLs que uma instância do SQL Server pode carregar e executar dinamicamente. O SQL Server é empacotado com muitos procedimentos armazenados estendidos que permitem a interação com as DLLs do sistema. Esta regra verifica se as permissões de execução desnecessárias em procedimentos armazenados estendidos foram revogadas.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA2107     |O conjunto mínimo de entidades deve ser membros de funções fixas do banco de dados mestre do Azure SQL DB          |Alta         |O banco de dados SQL fornece duas funções administrativas restritas no banco de dados mestre para as quais as contas de usuário podem ser adicionadas que concedem permissões para criar ou gerenciar logons. Essa regra verifica se um conjunto mínimo de entidades são membros dessas funções administrativas.         |<nobr/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA2108     |O conjunto mínimo de entidades deve ser membros das funções de banco de dados de alto impacto fixo          |Alta         |SQL Server fornece funções para ajudar a gerenciar as permissões. As funções são entidades de segurança que agrupam outras entidades. As funções de nível de banco de dados são de todo o banco de dados em seu escopo de permissão. Essa regra verifica se um conjunto mínimo de entidades são membros das funções de banco de dados fixas.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL<br/><br/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA2109     |O conjunto mínimo de entidades deve ser membros de funções de banco de dados de baixo impacto fixos          |Baixo         |SQL Server fornece funções para ajudar a gerenciar as permissões. As funções são entidades de segurança que agrupam outras entidades. As funções de nível de banco de dados são de todo o banco de dados em seu escopo de permissão. Essa regra verifica se um conjunto mínimo de entidades são membros das funções de banco de dados fixas.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL<br/><br/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA2110     |As permissões de execução para acessar o registro devem ser revogadas          |Alta         |Os procedimentos armazenados estendidos do registro permitem que Microsoft SQL Server Leia valores e chaves de gravação e enumeração no registro. Eles são usados pelo Enterprise Manager para configurar o servidor. Esta regra verifica se as permissões para executar procedimentos armazenados estendidos do registro foram revogadas de todos os usuários (diferente de dbo).         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA2113     |As permissões do DTS (Data Transformation Services) só devem ser concedidas a funções SSIS          |Médio         |DTS (Data Transformation Services), é um conjunto de objetos e utilitários que permitem a automação de operações de extração, transformação e carregamento de ou para um banco de dados. Os objetos são pacotes DTS e seus componentes, e os utilitários são chamados de ferramentas DTS. Essa regra verifica se apenas as funções SSIS recebem permissões para usar os procedimentos armazenados do sistema DTS e as permissões para a função pública usar os procedimentos armazenados do sistema DTS foram revogados.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA2114     |O conjunto mínimo de entidades deve ser membros das funções de servidor fixas de alto impacto          |Alta         |SQL Server fornece funções para ajudar a gerenciar permissões. As funções são entidades de segurança que agrupam outras entidades. As funções de nível de servidor são em todo o servidor em seu escopo de permissão. Essa regra verifica se um conjunto mínimo de entidades são membros das funções de servidor fixas.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA2129     |As alterações em módulos assinados devem ser autorizadas          |Alta         |Você pode assinar um procedimento armazenado, uma função ou um gatilho com um certificado ou uma chave assimétrica. Isso é criado para cenários quando as permissões não podem ser herdadas pelo encadeamento de propriedade ou quando a cadeia de propriedade é quebrada, como SQL dinâmico. Esta regra verifica as alterações feitas em módulos assinados, que podem ser uma indicação de uso mal-intencionado.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Banco de Dados SQL<br/><br/>Instância Gerenciada do SQL         |
|VA2130     |Acompanhar todos os usuários com acesso ao banco de dados          |Baixo         |Essa verificação controla todos os usuários com acesso a um banco de dados. Verifique se esses usuários estão autorizados de acordo com sua função atual na organização.         |<nobr>Banco de Dados SQL<nobr/><br/><br/>Azure Synapse         |

## <a name="auditing-and-logging"></a>Auditoria e registro em log

|ID da regra  |Título da regra  |Severidade da regra  |Descrição da Regra  |Plataforma  |
|---------|---------|---------|---------|---------|
|VA1045     |O rastreamento padrão deve ser habilitado          |Médio         |O rastreamento padrão proporciona assistência à solução de problemas para administradores de banco de dados, garantindo que eles disponham do log dos dados necessários para diagnosticar problemas na primeira vez em que ocorrem. Esta regra verifica se o rastreamento padrão está habilitado.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1091     |A auditoria de tentativas de logon bem-sucedidas e com falha (rastreamento padrão) deve ser habilitada quando a ' auditoria de logon ' estiver configurada para rastrear logons          |Baixo         |SQL Server configuração de auditoria de logon permite que os administradores acompanhem o logon de usuários em instâncias do SQL Server. Se o usuário optar por contar com "auditoria de logon" para controlar os usuários que fazem logon em instâncias de SQL Server, será importante habilitá-lo para tentativas de logon bem-sucedidas e com falha.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1093     |O número máximo de logs de erros deve ser 12 ou mais          |Baixo         |Cada SQL Server log de erros terá todas as informações relacionadas a falhas/erros ocorridos desde a última reinicialização do SQL Server ou desde a última vez que os logs de erros foram reciclados. Essa regra verifica se o número máximo de logs de erros é 12 ou mais.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1258     |Os proprietários do banco de dados são os esperados          |Alta         |Os proprietários de banco de dados podem executar todas as atividades de configuração e manutenção no banco de dados e também podem remover bancos de dados no SQL Server. O controle dos proprietários do banco de dados é importante para evitar ter permissões excessivas para algumas entidades. Crie uma linha de base que define os proprietários de banco de dados esperados para o banco de dados. Esta regra verifica se os proprietários do banco de dados são conforme definido na linha de base.         |<nobr>SQL Server 2016 +<sup>3</sup><nobr/><br/><br/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA1264     |A auditoria de tentativas de logon bem-sucedidas e com falha deve ser habilitada          |Baixo         |SQL Server configuração de auditoria permite que os administradores acompanhem o logon de usuários em instâncias do SQL Server para as quais são responsáveis. Essa regra verifica se a auditoria está habilitada para tentativas de logon bem-sucedidas e com falha.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1265     |A auditoria de tentativas de logon bem-sucedidas e com falha para a autenticação de banco de BD independente deve ser habilitada          |Médio         |SQL Server configuração de auditoria permite que os administradores acompanhem o registro em log de usuários para SQL Server instâncias para as quais são responsáveis. Essa regra verifica se a auditoria está habilitada para tentativas de logon bem-sucedidas e com falha para autenticação de banco de BD independente.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1281     |Todas as associações para funções definidas pelo usuário devem ser pretendidas          |Médio         |As funções definidas pelo usuário são entidades de segurança definidas pelo usuário para agrupar entidades para gerenciar facilmente as permissões. O monitoramento dessas funções é importante para evitar ter permissões excessivas. Crie uma linha de base que define a associação esperada para cada função definida pelo usuário. Esta regra verifica se todas as associações de funções definidas pelo usuário são as definidas na linha de base.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL<br/><br/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA1283     |Deve haver pelo menos uma auditoria ativa no sistema          |Baixo         |A auditoria de uma instância do Mecanismo de Banco de Dados do SQL Server ou de um banco de dados individual envolve o acompanhamento e o registro em log de eventos que ocorrem no Mecanismo de Banco de Dados. O objeto Auditoria do SQL Server coleta uma instância única de ações no nível do servidor e/ou do banco de dados e grupos de ações a serem monitoradas. Essa regra verifica se há pelo menos uma auditoria ativa no sistema.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA2061     |A auditoria deve ser habilitada no nível do servidor          |Alta         |A auditoria do banco de dados SQL do Azure rastreia eventos do banco de dados e os grava em um log de auditoria em sua conta de armazenamento do Azure. A auditoria ajuda você a compreender a atividade do banco de dados e a obter informações sobre discrepâncias e anomalias que podem indicar preocupações comerciais ou violações suspeitas de segurança, além de ajudá-lo a atender à conformidade regulatória. Para obter mais informações, consulte [auditoria do SQL do Azure](./auditing-overview.md). Esta regra verifica se a auditoria está habilitada.         |<nobr/>Banco de Dados SQL<br/><br/>Azure Synapse          |

## <a name="data-protection"></a>Proteção de dados

|ID da regra  |Título da regra  |Severidade da regra  |Descrição da Regra  |Plataforma  |
|---------|---------|---------|---------|---------|
|VA1098     |Qualquer ponto de extremidade existente de SSB ou espelhamento deve exigir conexão AES          |Alta         |Os pontos de extremidade de Service Broker e espelhamento dão suporte a diferentes algoritmos de criptografia, incluindo no-Encryption. Essa regra verifica se qualquer ponto de extremidade existente requer criptografia AES.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1219     |A Transparent Data Encryption deve ser habilitada          |Médio         |A TDE (Transparent Data Encryption) ajuda a proteger os arquivos de banco de dados contra a divulgação de informações, executando criptografia e descriptografia em tempo real do banco de dados, backups associados e arquivos de log de transações ' em repouso ', sem a necessidade de alterações no aplicativo. Essa regra verifica se o TDE está habilitado no banco de dados.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL<br/><br/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA1220     |A comunicação do banco de dados usando o TDS deve ser protegida por meio de TLS          |Alta         |Microsoft SQL Server pode usar protocolo SSL (SSL) ou TLS (segurança de camada de transporte) para criptografar dados que são transmitidos em uma rede entre uma instância do SQL Server e um aplicativo cliente. Essa regra verifica se todas as conexões com os SQL Server são criptografadas por meio de TLS.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1221     |Chaves simétricas de criptografia de banco de dados devem usar o algoritmo AES          |Alta         |O SQL Server usa chaves de criptografia para ajudar a proteger as credenciais de dados e as informações de conexão armazenadas em um banco de dados de servidor. SQL Server tem dois tipos de chaves: simétrica e assimétrica. Esta regra verifica se as chaves simétricas de criptografia de banco de dados usam o algoritmo AES.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL<br/><br/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA1222     |Cell-Level chaves de criptografia devem usar o algoritmo AES          |Alta         |A criptografia de Cell-Level (CLE) permite que você criptografe seus dados usando chaves simétricas e assimétricas. Essa regra verifica se Cell-Level chaves simétricas de criptografia usam o algoritmo AES.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1223     |As chaves de certificado devem usar pelo menos 2048 bits          |Alta         |As chaves de certificado são usadas no RSA e outros algoritmos de criptografia para proteger os dados. Essas chaves precisam ter comprimento suficiente para proteger os dados do usuário. Essa regra verifica se o comprimento da chave é de pelo menos 2048 bits para todos os certificados.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL<br/><br/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA1224     |O comprimento das chaves assimétricas deve ser pelo menos 2048 bits          |Alta         |As chaves assimétricas de banco de dados são usadas em muitos algoritmos de criptografia, essas chaves precisam ter comprimento suficiente para proteger os dados criptografados. essa regra verifica se todas as chaves assimétricas armazenadas no banco de dado têm comprimento de pelo menos 2048 bits         |<nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/>Banco de Dados SQL         |
|VA1279     |A criptografia forçada deve ser habilitada para TDS          |Alta         |Quando a opção forçar criptografia para o Mecanismo de Banco de Dados estiver habilitada, todas as comunicações entre o cliente e o servidor serão criptografadas, independentemente de a opção "criptografar conexão" (como no SSMS) estar marcada ou não. Esta regra verifica se a opção forçar criptografia está habilitada.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1288     |Colunas de dados confidenciais devem ser classificadas          |Médio         |Esta regra verifica se o banco de dados digitalizado tem informações potencialmente confidenciais que não foram classificadas.         |<nobr/>Banco de Dados SQL         |
|VA2060     |A detecção de ameaças do SQL deve ser habilitada no nível do servidor          |Médio         |A detecção de ameaças do SQL fornece uma camada de segurança que detecta possíveis vulnerabilidades e atividade anômala em bancos de dados, como ataques de injeção de SQL e padrões de comportamento incomum. Quando uma ameaça potencial é detectada, a detecção de ameaças envia um alerta em tempo real acionável por email e na central de segurança do Azure, que inclui etapas claras de investigação e correção para a ameaça específica. Para obter mais informações, consulte [Configurar a detecção de ameaças](./threat-detection-configure.md). Essa verificação verifica se a detecção de ameaças do SQL está habilitada         |<nobr/><br/>Instância Gerenciada de SQL<br/><br/>Banco de Dados SQL<br/><br/>Azure Synapse         |

## <a name="installation-updates-and-patches"></a>Patches e atualizações de instalação

|ID da regra  |Título da regra  |Severidade da regra  |Descrição da Regra  |Plataforma  |
|---------|---------|---------|---------|---------|
| VA1018     |As atualizações mais recentes devem ser instaladas          |Alta         |A Microsoft lança periodicamente as atualizações cumulativas (CUs) para cada versão do SQL Server. Esta regra verifica se o CU mais recente foi instalado para a versão específica do SQL Server que está sendo usado, passando uma cadeia de caracteres para execução. Essa regra verifica se todos os usuários (exceto dbo) não têm permissão para executar o xp_cmdshell procedimento armazenado estendido. |<nobr>SQL Server 2005<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/><nobr>SQL Server 2016<nobr/><br/><br/>Microsoft SQL Server 2017<br/>|
|VA2128     |Não há suporte para avaliação de vulnerabilidade em versões SQL Server menores do que SQL Server 2012          |Alta         |Para executar uma verificação de avaliação de vulnerabilidade em seu SQL Server o servidor precisa ser atualizado para SQL Server 2012 ou superior, SQL Server 2008 R2 e inferior não têm mais suporte da Microsoft. Para obter mais informações, consulte <https://www.microsoft.com/cloud-platform/windows-sql-server-2008>.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL<br/><br/>Banco de Dados SQL<br/><br/>Azure Synapse         |

## <a name="surface-area-reduction"></a>Redução da área da superfície

|ID da regra  |Título da regra  |Severidade da regra  |Descrição da Regra  |Plataforma  |
|---------|---------|---------|---------|---------|
|VA1022     |Consultas distribuídas ad hoc devem ser desabilitadas          |Médio         |As consultas distribuídas ad hoc usam as `OPENROWSET` `OPENDATASOURCE` funções e para se conectar a fontes de dados remotas que usam OLE DB. Esta regra verifica se as consultas distribuídas ad hoc estão desabilitadas.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1023     |O CLR deve ser desabilitado          |Alta         |O CLR permite que o código gerenciado seja hospedado pelo e executado no ambiente de Microsoft SQL Server. Esta regra verifica se o CLR está desabilitado.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1026     |O CLR deve ser desabilitado          |Médio         |O CLR permite que o código gerenciado seja hospedado pelo e executado no ambiente de Microsoft SQL Server. O CLR Strict Security trata assemblies seguros e EXTERNAL_ACCESS como se fossem marcados como não seguros e requer que todos os assemblies sejam assinados por um certificado ou uma chave assimétrica com um logon correspondente que tenha recebido permissão de ASSEMBLY não segura no banco de dados mestre. Esta regra verifica se o CLR está desabilitado.         |<nobr>SQL Server 2017 +<sup>2</sup><nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1027     |Os assemblies confiáveis não controlados devem ser removidos          |Alta         |Os assemblies marcados como não seguros devem ser assinados por um certificado ou uma chave assimétrica com um logon correspondente que tenha recebido permissão de ASSEMBLY não segura no banco de dados mestre. Os assemblies confiáveis podem ignorar esse requisito.          |<nobr>SQL Server 2017 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1044     |As conexões de administrador remoto devem ser desabilitadas, a menos que sejam especificamente necessárias          |Médio         |Esta regra verifica se as conexões de administrador dedicado remoto estão desabilitadas se não estiverem sendo usadas para clustering para reduzir a área de superfície de ataque. SQL Server fornece uma conexão de administrador dedicada (DAC). O DAC permite que um administrador acesse um servidor em execução para executar funções de diagnóstico ou instruções Transact-SQL, ou para solucionar problemas no servidor e se torna um alvo atraente para atacar quando ele é habilitado remotamente.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1051     |AUTO_CLOSE deve ser desabilitado em todos os bancos de dados          |Médio         |A opção AUTO_CLOSE especifica se o banco de dados é desligado normalmente e libera recursos após a desconexão do último usuário. Independentemente de seus benefícios, ele pode causar negação de serviço, abrindo e fechando agressivamente o banco de dados, portanto, é importante manter esse recurso desabilitado. Esta regra verifica se essa opção está desabilitada no banco de dados atual.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1066     |Os pontos de extremidade do Service Broker não utilizados devem ser removidos          |Baixo         |O Service Broker fornece enfileiramento e mensagens confiáveis para SQL Server. Service Broker é usado para aplicativos que usam uma única instância de SQL Server e aplicativos que distribuem o trabalho entre várias instâncias. Os pontos de extremidade do Service Broker fornecem opções para a segurança do transporte e o encaminhamento de mensagens. Essa regra enumera todos os pontos de extremidade do Service Broker. Remova os que não são usados.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1071     |A opção ' examinar procedimentos armazenados de inicialização ' deve ser desabilitada          |Médio         |Quando a ' verificação de procs de inicialização ' está habilitada SQL Server verifica e executa todos os procedimentos armazenados executados automaticamente definidos no servidor. Se essa opção estiver habilitada SQL Server verificar e executar todos os procedimentos armazenados executados automaticamente definidos no servidor. Esta regra verifica se essa opção está desabilitada.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1092     |SQL Server instância não deve ser anunciada pelo serviço de SQL Server Browser          |Baixo         |SQL Server usa o serviço SQL Server Browser para enumerar as instâncias do Mecanismo de Banco de Dados instalado no computador. Isso permite que os aplicativos cliente procurem um servidor e ajuda os clientes a distinguir entre várias instâncias do Mecanismo de Banco de Dados no mesmo computador. Esta regra verifica se a instância do SQL está oculta.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1102     |O bit confiável deve ser desabilitado em todos os bancos de dados, exceto MSDB          |Alta         |A propriedade de banco de dados TRUSTWORTHY é usada para indicar se a instância do SQL Server confia no banco de dados e no conteúdo dentro dele. Se essa opção estiver habilitada, os módulos de banco de dados (por exemplo, funções definidas pelo usuário ou procedimentos armazenados) que usam um contexto de representação podem acessar recursos fora do banco de dados. Essa regra verifica se o bit confiável está desabilitado em todos os bancos de dados, exceto MSDB.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1143     |o usuário ' dbo ' não deve ser usado para a operação de serviço normal          |Médio         |O ' dbo ' ou o proprietário do banco de dados é uma conta de usuário que tem permissões implícitas para executar todas as atividades no banco de dados. Os membros da função de servidor fixa sysadmin são mapeados automaticamente para dbo. Essa regra verifica se dbo não é a única conta com permissão para acessar este banco de dados. Observe que, em um banco de dados limpo criado recentemente, essa regra falhará até que funções adicionais sejam criadas.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL<br/><br/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA1144     |O banco de dados modelo só deve ser acessível por ' dbo '          |Médio         |O banco de dados modelo é usado como modelo para todos os bancos de dados criados na instância do SQL Server. As modificações feitas no banco de dados modelo, como modelo de recuperação de tamanho de banco de dados e outras opções de banco de dados, são aplicadas a todos os bancos criados posteriormente. Essa regra verifica se dbo é a única conta com permissão para acessar o banco de dados modelo.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1230     |FileStream deve ser desabilitado          |Alta         |O FILESTREAM integra o Mecanismo de Banco de Dados de SQL Server com um sistema de arquivos NTFS armazenando dados de BLOB (objeto binário grande) varbinary (max) como arquivos no sistema de arquivos. As instruções Transact-SQL podem inserir, atualizar, consultar, Pesquisar e fazer backup de dados FILESTREAM. Habilitar o FileStream no SQL Server expõe a API de streaming NTFS adicional, o que aumenta sua superfície de ataque e o torna propenso a ataques mal-intencionados. Esta regra verifica se o FileStream está desabilitado.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1235     |A configuração do servidor ' XPs de replicação ' deve ser desabilitada          |Médio         |Desabilite a configuração de servidor preterida "XPs de replicação" para limitar a área de superfície de ataque. Essa é uma definição de configuração somente interno.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1244     |Os usuários órfãos devem ser removidos dos bancos de dados do SQL Server          |Médio         |Um usuário de banco de dados que existe em um banco de dados, mas não tem nenhum logon correspondente no banco de dados mestre ou como um recurso externo (por exemplo, um usuário do Windows) é conhecido como um usuário órfão e deve ser removido ou remapeado para um logon válido. Essa regra verifica se não há usuários órfãos.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1245     |As informações de dbo devem ser consistentes entre o banco de dados de destino e o mestre          |Alta         |Há informações redundantes sobre a identidade de dbo para qualquer banco de dados: metadados armazenados no próprio banco de dados e metadados armazenados no BD mestre. Essa regra verifica se essas informações são consistentes entre o banco de dados de destino e o mestre.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1247     |Não deve haver SPs marcados como início automático          |Alta         |Quando SQL Server tiver sido configurado para ' verificar os procs de inicialização ', o servidor verificará o Master DB em busca de procedimentos armazenados marcados como início automático. Essa regra verifica se não há SPs marcados como início automático.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1256     |Os assemblies CLR do usuário não devem ser definidos no banco de dados          |Alta         |Os assemblies CLR podem ser usados para executar código arbitrário no processo de SQL Server. Essa regra verifica se não há assemblies CLR definidos pelo usuário no banco de dados.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA1277     |A criptografia de rede do polybase deve ser habilitada          |Alta         |O polybase é uma tecnologia que acessa e combina dados relacionais e não relacionais em SQL Server. A opção de criptografia de rede do polybase configura SQL Server para criptografar o controle e os canais de dados ao usar o polybase. Essa regra verifica se essa opção está habilitada.         |<nobr>SQL Server 2016 +<nobr/>         |
|VA1278     |Criar uma linha de base de provedores de gerenciamento de chaves externas          |Médio         |O SQL Server EKM (gerenciamento extensível de chaves) permite que os fornecedores de HSM/módulos de segurança de hardware de terceiros registrem seus módulos no SQL Server. Quando registrado SQL Server os usuários podem usar as chaves de criptografia armazenadas em módulos EKM, essa regra exibe uma lista de provedores EKM que estão sendo usados no sistema.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA2062     |Regras de firewall no nível de banco de dados não devem conceder acesso excessivo          |Alta         |O firewall no nível do banco de dados SQL do Azure ajuda a proteger seus dados, impedindo todo o acesso ao banco de dado até que você especifique quais endereços IP têm permissão. As regras de firewall no nível de banco de dados concedem acesso ao banco de dados específico com base no endereço IP de origem de cada solicitação. As regras de firewall no nível de banco de dados para bancos de dados mestre e de usuário só podem ser criadas e gerenciadas por meio do Transact-SQL (ao contrário das regras de firewall de nível de servidor, que também podem ser criadas e gerenciadas usando o portal do Azure ou o PowerShell). Para obter mais informações, consulte [regras de firewall de IP do banco de dados SQL do Azure e do Azure Synapse Analytics](./firewall-configure.md). Essa verificação verifica se as regras de firewall no nível de banco de dados não concedem acesso a mais de 255 endereços IP.         |<nobr/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA2063     |Regras de firewall no nível de servidor não devem conceder acesso excessivo          |Alta         |O firewall de nível de servidor do SQL do Azure ajuda a proteger seu servidor impedindo todo o acesso aos seus bancos de dados até que você especifique quais endereços IP têm permissão. As regras de firewall no nível de servidor concedem acesso a todos os bancos de dados que pertencem ao servidor com base no endereço IP de origem de cada solicitação.  As regras de firewall no nível de servidor só podem ser criadas e gerenciadas por meio do Transact-SQL, bem como pelo portal do Azure ou pelo PowerShell. Para obter mais informações, consulte [regras de firewall de IP do banco de dados SQL do Azure e do Azure Synapse Analytics](./firewall-configure.md). Essa verificação verifica se as regras de firewall no nível de servidor não concedem acesso a mais de 255 endereços IP.         |<nobr/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA2064     |As regras de firewall no nível de banco de dados devem ser controladas e mantidas em um mínimo estrito          |Alta         |O firewall no nível do banco de dados SQL do Azure ajuda a proteger seus dados, impedindo todo o acesso ao banco de dado até que você especifique quais endereços IP têm permissão. As regras de firewall no nível de banco de dados concedem acesso ao banco de dados específico com base no endereço IP de origem de cada solicitação. As regras de firewall no nível de banco de dados para bancos de dados mestre e de usuário só podem ser criadas e gerenciadas por meio do Transact-SQL (ao contrário das regras de firewall de nível de servidor, que também podem ser criadas e gerenciadas usando o portal do Azure ou o PowerShell). Para obter mais informações, consulte [regras de firewall de IP do banco de dados SQL do Azure e do Azure Synapse Analytics](./firewall-configure.md). Essa verificação enumera todas as regras de firewall no nível de banco de dados para que todas as alterações feitas a elas possam ser identificadas e resolvidas.         |<nobr/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA2065     |As regras de firewall no nível de servidor devem ser controladas e mantidas em um mínimo estrito          |Alta         |O firewall de nível de servidor do SQL do Azure ajuda a proteger seus dados, impedindo todo o acesso aos seus bancos até que você especifique quais endereços IP têm permissão. As regras de firewall no nível de servidor concedem acesso a todos os bancos de dados que pertencem ao servidor com base no endereço IP de origem de cada solicitação.  As regras de firewall no nível de servidor podem ser criadas e gerenciadas por meio do Transact-SQL, bem como pelo portal do Azure ou pelo PowerShell. Para obter mais informações, consulte [regras de firewall de IP do banco de dados SQL do Azure e do Azure Synapse Analytics](./firewall-configure.md).  Essa verificação enumera todas as regras de firewall no nível de servidor para que todas as alterações feitas a elas possam ser identificadas e resolvidas.         |<nobr/>Banco de Dados SQL<br/><br/>Azure Synapse         |
|VA2111     |Os bancos de dados de exemplo devem ser removidos          |Baixo         |Microsoft SQL Server vem acompanhado de vários bancos de dados de exemplo. Esta regra verifica se os bancos de dados de exemplo foram removidos.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA2120     |Recursos que podem afetar a segurança devem ser desabilitados          |Alta         |SQL Server é capaz de fornecer uma ampla variedade de recursos e serviços. Alguns dos recursos e serviços fornecidos por padrão podem não ser necessários e permitir que eles afetem negativamente a segurança do sistema. Esta regra verifica se esses recursos estão desabilitados.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA2121     | O recurso ' procedimentos de automação OLE ' deve ser desabilitado         |Alta         |SQL Server é capaz de fornecer uma ampla variedade de recursos e serviços. Alguns dos recursos e serviços, fornecidos por padrão, podem não ser necessários, e habilitá-los para afetar a segurança do sistema. A opção procedimentos de automação OLE controla se os objetos de automação OLE podem ser instanciados em lotes Transact-SQL. Esses são procedimentos armazenados estendidos que permitem que SQL Server usuários executem funções externas ao SQL Server. Independentemente de seus benefícios, ele também pode ser usado para explorações e é conhecido como um mecanismo popular para a fábrica de arquivos nos computadores de destino. É aconselhável usar o PowerShell como uma substituição para essa ferramenta. Esta regra verifica se o recurso ' procedimentos de automação OLE ' está desabilitado.          |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA2122     |O recurso ' user options ' deve ser desabilitado          |Médio         |SQL Server é capaz de fornecer uma ampla variedade de recursos e serviços. Alguns dos recursos e serviços fornecidos por padrão podem não ser necessários e permitir que eles afetem negativamente a segurança do sistema. As opções de usuário especificam os padrões globais para todos os usuários. Uma lista de opções de processamento de consulta padrão é definida para a duração da sessão de trabalho de um usuário. As opções de usuário permitem que você altere os valores padrão das opções SET (se as configurações padrão do servidor não forem apropriadas). Esta regra verifica se o recurso ' user options ' está desabilitado.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Instância Gerenciada de SQL         |
|VA2126     |Extensibilidade-recursos que podem afetar a segurança devem ser desabilitados se não forem necessários          |Médio         |O SQL Server fornece uma ampla variedade de recursos e serviços. Alguns dos recursos e serviços, fornecidos por padrão, podem não ser necessários, e habilitá-los para afetar a segurança do sistema. Essa regra verifica se as configurações que permitem a extração de dados para uma fonte de dados externa e a execução de scripts com determinadas extensões de linguagem remota estão desabilitadas.         |<nobr>SQL Server 2016 +<nobr/>         |

## <a name="removed-rules"></a>Regras removidas

|ID da regra  |Título da regra  |
|---------|---------|
|VA1021     |Os procedimentos armazenados temporários globais devem ser removidos         |
|VA1024    |O modo de auditoria C2 deve ser habilitado |
|VA1069     |As permissões para selecionar de tabelas e exibições do sistema devem ser revogadas de não-administradores de sistemas         |
|VA1090    |Garanta que todos os GOTS (governo fora da prateleira) e procedimentos armazenados personalizados sejam criptografados |
|VA1103    |Usar somente CLR com permissão SAFE_ACCESS |
|VA1229     |A configuração FileStream no registro e no SQL Server configuração deve corresponder         |
|VA1231     |FileStream deve ser desabilitado (SQL)         |
|VA1234     |A configuração de critérios comuns deve ser habilitada         |
|VA1252     |Lista de eventos sendo auditados e gerenciados centralmente por meio de especificações de auditoria de servidor.         |
|VA1253     |Lista de eventos no escopo do banco de BD sendo auditados e gerenciados centralmente por meio de especificações de auditoria de servidor         |
|VA1263     |Listar todas as auditorias ativas no sistema         |
|VA1266     |A opção ' MUST_CHANGE ' deve ser definida em todos os logons do SQL         |
|VA1276     |O recurso XPs do agente deve ser desabilitado         |
|VA1286     |As permissões de banco de dados não devem ser concedidas diretamente às entidades (objeto ou coluna)         |
|VA2000     |O conjunto mínimo de entidades deve receber permissões de escopo de banco de dados de alto impacto         |
|VA2001     |O conjunto mínimo de entidades deve receber permissões de escopo de banco de dados de alto impacto em objetos ou colunas         |
|VA2002     |O conjunto mínimo de entidades deve receber permissões de escopo de banco de dados de alto impacto em vários protegíveis         |
|VA2010     |O conjunto mínimo de entidades deve receber permissões de escopo de banco de dados de impacto médio         |
|VA2021     |O conjunto mínimo de entidades de segurança deve receber permissões ALTER no escopo do banco de dados em objetos ou colunas         |
|VA2022     |O conjunto mínimo de entidades de segurança deve receber a permissão ALTER no escopo do banco de dados em vários protegíveis         |
|VA2030     |O conjunto mínimo de entidades deve receber as permissões SELECT ou EXECUTE no escopo do banco de dados         |
|VA2031     |O conjunto mínimo de entidades deve receber o escopo do banco de dados SELECT          |
|VA2032     |O conjunto mínimo de entidades deve receber as permissões SELECT ou EXECUTE no escopo do banco de dados no esquema         |
|VA2034     |O conjunto mínimo de entidades deve receber a permissão de execução no escopo do banco de dados na coleção de esquemas XML         |
|VA2040     |O conjunto mínimo de entidades deve receber permissões de escopo de banco de dados de baixo impacto         |
|VA2041     |O conjunto mínimo de entidades deve receber permissões de escopo de banco de dados de baixo impacto em objetos ou colunas         |
|VA2042     |O conjunto mínimo de entidades deve receber permissões de escopo de banco de dados de baixo impacto no esquema         |
|VA2050     |O conjunto mínimo de entidades de segurança deve receber permissões de definição de exibição no escopo do banco de dados         |
|VA2051     |O conjunto mínimo de entidades de segurança deve receber permissões de definição de exibição no escopo do banco de dados em objetos ou colunas         |
|VA2052     |O conjunto mínimo de entidades de segurança deve receber a permissão de definição de exibição no escopo do banco de dados em vários protegíveis         |
|VA2100     |O conjunto mínimo de entidades deve receber permissões de escopo de servidor de alto impacto         |
|VA2101     |O conjunto mínimo de entidades deve receber permissões de escopo de servidor de impacto médio         |
|VA2102     |O conjunto mínimo de entidades deve receber permissões de escopo de servidor de baixo impacto         |
|VA2104     |As permissões de execução em procedimentos armazenados estendidos devem ser revogadas do público         |
|VA2105     |A senha de logon não deve ser facilmente adivinhada         |
|VA2112     |As permissões do público para o DTS (Data Transformation Services) devem ser revogadas         |
|VA2115     |O conjunto mínimo de entidades deve ser membros das funções de servidor fixas de impacto médio         |
|VA2123     |O recurso ' acesso remoto ' deve ser desabilitado         |
|VA2127     |O recurso ' scripts externos ' deve ser desabilitado         |

## <a name="next-steps"></a>Próximas etapas

- [Avaliação de Vulnerabilidade](sql-vulnerability-assessment.md)
- [Changelog de regras de avaliação de vulnerabilidade do SQL](sql-database-vulnerability-assessment-rules-changelog.md)
