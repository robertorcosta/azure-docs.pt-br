---
title: Recomendações de segurança para o armazenamento de blobs
titleSuffix: Azure Storage
description: Saiba mais sobre as recomendações de segurança para o armazenamento de BLOBs. Implementar essas diretrizes ajudará você a atender suas obrigações de segurança, conforme descrito em nosso modelo de responsabilidade compartilhada.
services: storage
author: tamram
ms.service: storage
ms.subservice: blobs
ms.topic: conceptual
ms.date: 03/01/2021
ms.author: tamram
ms.custom: security-recommendations
ms.openlocfilehash: 389d3507c3406743e14324c7b4667e045cfdb3b5
ms.sourcegitcommit: ed7376d919a66edcba3566efdee4bc3351c57eda
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/24/2021
ms.locfileid: "105048027"
---
# <a name="security-recommendations-for-blob-storage"></a>Recomendações de segurança para o armazenamento de blobs

Este artigo contém recomendações de segurança para o armazenamento de BLOBs. Implementar essas recomendações ajudará a atender as obrigações de segurança, conforme descrito em nosso modelo de responsabilidade compartilhada. Para obter mais informações sobre como a Microsoft cumpre as responsabilidades do provedor de serviços, consulte [responsabilidade compartilhada na nuvem](../../security/fundamentals/shared-responsibility.md).

Algumas das recomendações incluídas neste artigo podem ser monitoradas automaticamente pela Central de Segurança do Azure. A Central de Segurança do Azure é a primeira linha de defesa na proteção dos recursos no Azure. Para obter informações sobre a central de segurança do Azure, consulte o [que é a central de segurança do Azure?](../../security-center/security-center-introduction.md)

A central de segurança do Azure analisa periodicamente o estado de segurança de seus recursos do Azure para identificar possíveis vulnerabilidades de segurança. Em seguida, ela fornece recomendações sobre como solucioná-las. Para obter mais informações sobre as recomendações da Central de Segurança do Azure, confira [Recomendações de segurança na Central de Segurança do Azure](../../security-center/security-center-recommendations.md).

## <a name="data-protection"></a>Proteção de dados

| Recomendação | Comentários | Central de Segurança |
|-|----|--|
| Usar o modelo de implantação Azure Resource Manager | Crie novas contas de armazenamento usando o modelo de implantação Azure Resource Manager para aprimoramentos de segurança importantes, incluindo controle de acesso baseado em função do Azure (RBAC do Azure) e auditoria, implantação e governança baseadas no Resource Manager, acesso a identidades gerenciadas, acesso a Azure Key Vault para segredos e autenticação e autorização baseadas no Azure AD para acesso aos dados e recursos do armazenamento do Azure. Se possível, migre as contas de armazenamento existentes que usam o modelo de implantação clássico para usar Azure Resource Manager. Para obter mais informações sobre Azure Resource Manager, consulte [Azure Resource Manager visão geral](../../azure-resource-manager/management/overview.md). | - |
| Habilitar o Azure defender para todas as suas contas de armazenamento | O Azure defender para o armazenamento do Azure fornece uma camada adicional de inteligência de segurança que detecta tentativas incomuns e potencialmente prejudiciais de acessar ou explorar contas de armazenamento. Os alertas de segurança são disparados na central de segurança do Azure quando ocorrem anomalias na atividade e também são enviados por email para administradores de assinatura, com detalhes de atividades suspeitas e recomendações sobre como investigar e corrigir ameaças. Para obter mais informações, consulte [Configurar o Azure defender para o armazenamento do Azure](../common/azure-defender-storage-configure.md). | [Sim](../../security-center/security-center-remediate-recommendations.md) |
| Habilitar a exclusão reversível de blobs | A exclusão reversível para BLOBs permite recuperar dados de blob após sua exclusão. Para obter mais informações sobre a exclusão reversível de BLOBs, consulte [exclusão reversível para BLOBs de armazenamento do Azure](./soft-delete-blob-overview.md). | - |
| Ativar exclusão reversível para contêineres | A exclusão reversível para contêineres permite que você recupere um contêiner depois que ele tiver sido excluído. Para obter mais informações sobre a exclusão reversível de contêineres, consulte [exclusão reversível para contêineres (versão prévia)](./soft-delete-container-overview.md). | - |
| Bloquear a conta de armazenamento para impedir exclusões acidentais ou mal-intencionadas ou alterações de configuração | Aplique um bloqueio de Azure Resource Manager à sua conta de armazenamento para proteger a conta contra exclusão acidental ou mal-intencionada ou alteração de configuração. O bloqueio de uma conta de armazenamento não impede que os dados dentro dessa conta sejam excluídos. Ele apenas impede que a própria conta seja excluída. Para obter mais informações, consulte [aplicar um bloqueio de Azure Resource Manager a uma conta de armazenamento](../common/lock-account-resource.md).
| Armazene dados críticos para os negócios em BLOBs imutáveis | Configure as políticas de retenção baseadas em tempo e as isenções legais para armazenar dados de BLOB em um estado de WORM (gravar uma vez, ler muitos). Os BLOBs armazenados immutably podem ser lidos, mas não podem ser modificados ou excluídos durante a duração do intervalo de retenção. Para obter mais informações, consulte [armazenar dados de blob críticos para os negócios com armazenamento imutável](storage-blob-immutable-storage.md). | - |
| Exigir transferência segura (HTTPS) para a conta de armazenamento | Quando você precisa de transferência segura para uma conta de armazenamento, todas as solicitações para a conta de armazenamento devem ser feitas via HTTPS. Todas as solicitações feitas por HTTP são rejeitadas. A Microsoft recomenda que você sempre precise de transferência segura para todas as suas contas de armazenamento. Para obter mais informações, consulte [exigir transferência segura para garantir conexões seguras](../common/storage-require-secure-transfer.md). | - |
| Limitar tokens de SAS (assinatura de acesso compartilhado) a conexões HTTPS somente | Exigir HTTPS quando um cliente usa um token SAS para acessar dados de blob ajuda a minimizar o risco de espionagem. Para obter mais informações, consulte [conceder acesso limitado aos recursos de armazenamento do Azure usando assinaturas de acesso compartilhado (SAS)](../common/storage-sas-overview.md). | - |

## <a name="identity-and-access-management"></a>Gerenciamento de identidade e de acesso

| Recomendação | Comentários | Central de Segurança |
|-|----|--|
| Usar Azure Active Directory (AD do Azure) para autorizar o acesso a dados de BLOB | O Azure AD fornece segurança superior e facilidade de uso sobre chave compartilhada para autorizar solicitações ao armazenamento de BLOBs. Para obter mais informações, consulte [autorizar o acesso a BLOBs e filas do Azure usando o Azure Active Directory](../common/storage-auth-aad.md). | - |
| Tenha em mente a entidade de privilégio mínimo ao atribuir permissões a uma entidade de segurança do Azure AD por meio do RBAC do Azure | Ao atribuir uma função a um usuário, grupo ou aplicativo, conceda a essa entidade de segurança somente as permissões necessárias para que elas executem suas tarefas. Limitar o acesso a recursos ajuda a impedir o uso indevido intencional e mal-intencionado dos seus dados. | - |
| Usar uma SAS de delegação de usuário para conceder acesso limitado aos dados de blob aos clientes | Uma SAS de delegação de usuário é protegida com as credenciais do Azure Active Directory (AD do Azure) e também pelas permissões especificadas para a SAS. Uma SAS de delegação de usuário é análoga a uma SAS de serviço em termos de seu escopo e função, mas oferece benefícios de segurança em relação à SAS do serviço. Para obter mais informações, consulte [conceder acesso limitado aos recursos de armazenamento do Azure usando assinaturas de acesso compartilhado (SAS)](../common/storage-sas-overview.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json). | - |
| Proteger as chaves de acesso da sua conta com o Azure Key Vault | A Microsoft recomenda usar o Azure AD para autorizar solicitações ao armazenamento do Azure. No entanto, se você precisar usar a autorização de chave compartilhada, proteja as chaves de sua conta com Azure Key Vault. Você pode recuperar as chaves do cofre de chaves em tempo de execução, em vez de salvá-las com seu aplicativo. Para obter mais informações sobre Azure Key Vault, consulte [Azure Key Vault visão geral](../../key-vault/general/overview.md). | - |
| Regenerar as chaves de conta periodicamente | Girar as chaves de conta periodicamente reduz o risco de expor seus dados para atores mal-intencionados. | - |
| Não permitir autorização de chave compartilhada | Quando você não permite a autorização de chave compartilhada para uma conta de armazenamento, o armazenamento do Azure rejeita todas as solicitações subsequentes para essa conta que são autorizadas com as chaves de acesso da conta. Somente as solicitações seguras autorizadas com o Azure AD terão sucesso. Para obter mais informações, consulte [impedir a autorização de chave compartilhada para uma conta de armazenamento do Azure](../common/shared-key-authorization-prevent.md). | - |
| Tenha em mente a entidade de privilégio mínimo ao atribuir permissões a uma SAS | Ao criar uma SAS, especifique somente as permissões exigidas pelo cliente para executar sua função. Limitar o acesso a recursos ajuda a impedir o uso indevido intencional e mal-intencionado dos seus dados. | - |
| Ter um plano de revogação em vigor para qualquer SAS que você emite para clientes | Se uma SAS for comprometida, você desejará revogar essa SAS assim que possível. Para revogar uma SAS de delegação de usuário, revogue a chave de delegação de usuário para invalidar rapidamente todas as assinaturas associadas a essa chave. Para revogar uma SAS de serviço associada a uma política de acesso armazenada, você pode excluir a política de acesso armazenada, renomear a política ou alterar sua hora de expiração para uma hora que esteja no passado. Para obter mais informações, consulte [conceder acesso limitado aos recursos de armazenamento do Azure usando assinaturas de acesso compartilhado (SAS)](../common/storage-sas-overview.md).  | - |
| Se uma SAS de serviço não estiver associada a uma política de acesso armazenada, defina a hora de expiração para uma hora ou menos | Uma SAS de serviço que não está associada a uma política de acesso armazenada não pode ser revogada. Por esse motivo, limitando o tempo de expiração para que a SAS seja válida por uma hora ou menos, é recomendável. | - |
| Desabilitar o acesso de leitura público anônimo para contêineres e blobs | Acesso de leitura público anônimo a um contêiner e seus BLOBs concedem acesso somente leitura a esses recursos para qualquer cliente. Evite habilitar o acesso de leitura público, a menos que seu cenário exija. Para saber como desabilitar o acesso público anônimo para uma conta de armazenamento, consulte [Configurar acesso de leitura público anônimo para contêineres e blobs](anonymous-read-access-configure.md).  | - |

## <a name="networking"></a>Rede

| Recomendação | Comentários | Central de Segurança |
|-|----|--|
| Configure a versão mínima necessária da TLS (segurança da camada de transporte) para uma conta de armazenamento.  | Exigir que os clientes usem uma versão mais segura do TLS para fazer solicitações em uma conta de armazenamento do Azure Configurando a versão mínima do TLS para essa conta. Para obter mais informações, consulte [Configurar a versão mínima necessária da TLS (segurança da camada de transporte) para uma conta de armazenamento](../common/transport-layer-security-configure-minimum-version.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)| - |
| Habilitar a opção **transferência segura necessária** em todas as suas contas de armazenamento | Quando você habilita a opção **transferência segura necessária** , todas as solicitações feitas na conta de armazenamento devem ocorrer em conexões seguras. Todas as solicitações feitas por HTTP falharão. Para obter mais informações, consulte [exigir transferência segura no armazenamento do Azure](../common/storage-require-secure-transfer.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json). | [Sim](../../security-center/security-center-remediate-recommendations.md) |
| Habilitar regras de firewall | Configure as regras de firewall para limitar o acesso à sua conta de armazenamento a solicitações originadas de endereços IP ou intervalos especificados, ou de uma lista de sub-redes em uma VNet (rede virtual) do Azure. Para obter mais informações sobre como configurar regras de firewall, consulte [configurar redes virtuais e firewalls de armazenamento do Azure](../common/storage-network-security.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json). | - |
| Permitir que serviços da Microsoft confiáveis acessem a conta de armazenamento | Ativar regras de firewall para sua conta de armazenamento bloqueia solicitações de entrada para os dados por padrão, a menos que as solicitações sejam provenientes de um serviço que está operando em uma VNet (Rede Virtual) do Azure ou de endereços IP públicos permitidos. Solicitações que estão bloqueadas incluem as de outros serviços do Azure, do portal do Azure, de registro em log e serviços de métricas e assim por diante. Você pode permitir solicitações de outros serviços do Azure adicionando uma exceção para permitir que serviços confiáveis da Microsoft acessem a conta de armazenamento. Para obter mais informações sobre como adicionar uma exceção para serviços confiáveis da Microsoft, consulte [configurar redes virtuais e firewalls de armazenamento do Azure](../common/storage-network-security.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json).| - |
| Usar pontos de extremidade privados | Um ponto de extremidade privado atribui um endereço IP privado de sua rede virtual do Azure (VNet) à conta de armazenamento. Ele protege todo o tráfego entre sua VNet e a conta de armazenamento por um link privado. Para obter mais informações sobre pontos de extremidade privados, consulte [conectar-se de forma privada a uma conta de armazenamento usando o ponto de extremidade privado do Azure](../../private-link/tutorial-private-endpoint-storage-portal.md). | - |
| Usar marcas de serviço de VNet | Uma marca de serviço representa um grupo de prefixos de endereço IP de um determinado serviço do Azure. A Microsoft gerencia os prefixos de endereço englobados pela marca de serviço e atualiza automaticamente a marca de serviço em caso de alteração de endereços. Para obter mais informações sobre marcas de serviço com suporte no armazenamento do Azure, consulte [visão geral das marcas de serviço do Azure](../../virtual-network/service-tags-overview.md). Para obter um tutorial que mostra como usar marcas de serviço para criar regras de rede de saída, consulte [restringir o acesso aos recursos de PaaS](../../virtual-network/tutorial-restrict-network-access-to-resources.md). | - |
| Limitar o acesso à rede para redes específicas | Limitar o acesso à rede para redes que hospedam clientes que exigem acesso reduz a exposição de seus recursos a ataques de rede. | [Sim](../../security-center/security-center-remediate-recommendations.md) |
| Configurar preferência de roteamento de rede | Você pode configurar a preferência de roteamento de rede para sua conta de armazenamento do Azure para especificar como o tráfego de rede é roteado para sua conta de clientes pela Internet usando a rede global da Microsoft ou o roteamento da Internet. Para obter mais informações, consulte [Configurar a preferência de roteamento de rede para o armazenamento do Azure](../common/network-routing-preference.md). | - |

## <a name="loggingmonitoring"></a>Registro em log/monitoramento

| Recomendação | Comentários | Central de Segurança |
|-|----|--|
| Controlar como as solicitações são autorizadas | Habilite o log de armazenamento do Azure para controlar como cada solicitação feita no armazenamento do Azure foi autorizada. Os logs indicam se uma solicitação foi feita anonimamente, usando um token OAuth 2,0, usando a chave compartilhada ou usando uma SAS (assinatura de acesso compartilhado). Para obter mais informações, consulte [monitorando o armazenamento de BLOBs do Azure com o Azure monitor](monitor-blob-storage.md) ou [log de análise de armazenamento do Azure com monitoramento clássico](../common/storage-analytics-logging.md). | - |
| Configurar alertas no Azure Monitor | Configure alertas de log para avaliar os logs de recursos em uma frequência definida e acione um alerta com base nos resultados. Para obter mais informações, consulte [log Alerts in Azure monitor](../../azure-monitor/alerts/alerts-unified-log.md). | - |

## <a name="next-steps"></a>Próximas etapas

- [Documentação de segurança do Azure](../../security/index.yml)
- [Documentação de desenvolvimento seguro](../../security/develop/index.yml).